
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dynamic Dermatome Visualization</title>
        <style>
            body { 
                font-family: Arial, sans-serif;
                margin: 20px;
                background: #f5f5f5;
            }
            .container {
                display: flex;
                gap: 20px;
                max-width: 1200px;
                margin: 0 auto;
                flex-direction: column;
            }
            .controls {
                display: flex;
                gap: 20px;
                padding: 20px;
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                flex-wrap: wrap;
                justify-content: center;
            }
            .spinal-column {
                display: flex;
                flex-direction: column;
                gap: 5px;
                min-width: 150px;
            }
            .column-title {
                font-weight: bold;
                text-align: center;
                margin-bottom: 10px;
                color: #333;
                padding: 5px;
                background: #f8f8f8;
                border-radius: 4px;
            }
            .level-row {
                display: flex;
                gap: 5px;
                align-items: center;
                margin-bottom: 5px;
                justify-content: center;
            }
            .level-label {
                width: 40px;
                text-align: right;
                font-weight: bold;
                color: #666;
            }
            .spinal-button {
                padding: 8px 15px;
                border: 2px solid #2196F3;
                background: white;
                color: #2196F3;
                border-radius: 4px;
                cursor: pointer;
                transition: all 0.3s ease;
                min-width: 40px;
                font-weight: bold;
            }
            .spinal-button:hover {
                background: #E3F2FD;
            }
            .spinal-button.active {
                background: #2196F3;
                color: white;
            }
            .visualization {
                flex: 1;
                height: 800px;
                position: relative;
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                margin: 20px;
                overflow: hidden;
            }
            .dermatome-highlight {
                position: absolute;
                width: 20px;
                height: 20px;
                background: rgba(33, 150, 243, 0.3);
                border: 2px solid rgba(33, 150, 243, 0.5);
                border-radius: 50%;
                transform: translate(-50%, -50%);
                transition: all 0.3s ease;
            }
            .dermatome-highlight.active {
                background: rgba(33, 150, 243, 0.5);
                border-color: rgba(33, 150, 243, 0.8);
                box-shadow: 0 0 10px rgba(33, 150, 243, 0.3);
            }
            .tooltip {
                position: absolute;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                font-size: 12px;
                pointer-events: none;
                z-index: 1000;
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="controls">
    
                <div class="spinal-column">
                    <div class="column-title">Cervical</div>
            
                    <div class="level-row">
                        <span class="level-label">C2</span>
                        <button class="spinal-button left" data-level="c2" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c2" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">C3</span>
                        <button class="spinal-button left" data-level="c3" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c3" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">C4</span>
                        <button class="spinal-button left" data-level="c4" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c4" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">C5</span>
                        <button class="spinal-button left" data-level="c5" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c5" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">C6</span>
                        <button class="spinal-button left" data-level="c6" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c6" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">C7</span>
                        <button class="spinal-button left" data-level="c7" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c7" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">C8</span>
                        <button class="spinal-button left" data-level="c8" data-side="left">L</button>
                        <button class="spinal-button right" data-level="c8" data-side="right">R</button>
                    </div>
                
                </div>
            
                <div class="spinal-column">
                    <div class="column-title">Thoracic</div>
            
                    <div class="level-row">
                        <span class="level-label">T1</span>
                        <button class="spinal-button left" data-level="t1" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t1" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T2</span>
                        <button class="spinal-button left" data-level="t2" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t2" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T3</span>
                        <button class="spinal-button left" data-level="t3" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t3" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T4</span>
                        <button class="spinal-button left" data-level="t4" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t4" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T5</span>
                        <button class="spinal-button left" data-level="t5" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t5" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T6</span>
                        <button class="spinal-button left" data-level="t6" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t6" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T7</span>
                        <button class="spinal-button left" data-level="t7" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t7" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T8</span>
                        <button class="spinal-button left" data-level="t8" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t8" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T9</span>
                        <button class="spinal-button left" data-level="t9" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t9" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T10</span>
                        <button class="spinal-button left" data-level="t10" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t10" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T11</span>
                        <button class="spinal-button left" data-level="t11" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t11" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">T12</span>
                        <button class="spinal-button left" data-level="t12" data-side="left">L</button>
                        <button class="spinal-button right" data-level="t12" data-side="right">R</button>
                    </div>
                
                </div>
            
                <div class="spinal-column">
                    <div class="column-title">Lumbar</div>
            
                    <div class="level-row">
                        <span class="level-label">L1</span>
                        <button class="spinal-button left" data-level="l1" data-side="left">L</button>
                        <button class="spinal-button right" data-level="l1" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">L2</span>
                        <button class="spinal-button left" data-level="l2" data-side="left">L</button>
                        <button class="spinal-button right" data-level="l2" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">L3</span>
                        <button class="spinal-button left" data-level="l3" data-side="left">L</button>
                        <button class="spinal-button right" data-level="l3" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">L4</span>
                        <button class="spinal-button left" data-level="l4" data-side="left">L</button>
                        <button class="spinal-button right" data-level="l4" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">L5</span>
                        <button class="spinal-button left" data-level="l5" data-side="left">L</button>
                        <button class="spinal-button right" data-level="l5" data-side="right">R</button>
                    </div>
                
                </div>
            
                <div class="spinal-column">
                    <div class="column-title">Sacral</div>
            
                    <div class="level-row">
                        <span class="level-label">S1</span>
                        <button class="spinal-button left" data-level="s1" data-side="left">L</button>
                        <button class="spinal-button right" data-level="s1" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">S2</span>
                        <button class="spinal-button left" data-level="s2" data-side="left">L</button>
                        <button class="spinal-button right" data-level="s2" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">S3</span>
                        <button class="spinal-button left" data-level="s3" data-side="left">L</button>
                        <button class="spinal-button right" data-level="s3" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">S4</span>
                        <button class="spinal-button left" data-level="s4" data-side="left">L</button>
                        <button class="spinal-button right" data-level="s4" data-side="right">R</button>
                    </div>
                
                    <div class="level-row">
                        <span class="level-label">S5</span>
                        <button class="spinal-button left" data-level="s5" data-side="left">L</button>
                        <button class="spinal-button right" data-level="s5" data-side="right">R</button>
                    </div>
                
                </div>
            
                <div class="spinal-column">
                    <div class="column-title">Other</div>
            
                    <div class="level-row">
                        <span class="level-label">COCCYGEAL</span>
                        <button class="spinal-button left" data-level="coccygeal" data-side="left">L</button>
                        <button class="spinal-button right" data-level="coccygeal" data-side="right">R</button>
                    </div>
                
                </div>
            
            </div>
            <div id="visualization" class="visualization">
                <div id="tooltip" class="tooltip"></div>
            </div>
        </div>

        <script>
            // Dermatome data from database
            const dermatomes = [{"name": "left c2 dermatome", "x": 31.29, "y": 810.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left c3 dermatome", "x": 31.57, "y": 785.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left c4 dermatome", "x": 27.15, "y": 760.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left c5 dermatome", "x": 15.98, "y": 735.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left c6 dermatome", "x": 28.04, "y": 710.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left c7 dermatome", "x": 12.84, "y": 685.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left c8 dermatome", "x": 9.15, "y": 660.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left coccygeal dermatome", "x": 47.97950521, "y": 617.9449328, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left l1 dermatome", "x": 45.06616991, "y": 582.208763, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left l2 dermatome", "x": 54.44178061, "y": 565.9691178, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left l3 dermatome", "x": 46.1052987, "y": 623.936467, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left l4 dermatome", "x": 48.16074071, "y": 607.6094786, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left l5 dermatome", "x": 40.3950484, "y": 621.2566161, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left s1 dermatome", "x": 59.48728394, "y": 574.2330754, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left s2 dermatome", "x": 68.5586666, "y": 628.979674, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left s3 dermatome", "x": 54.11768998, "y": 600.1000416, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left s4 dermatome", "x": 59.06327483, "y": 627.4473086, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left s5 dermatome", "x": 43.21239896, "y": 589.4392444, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t1 dermatome", "x": 48.87200872, "y": 601.3932063, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t10 dermatome", "x": 57.28360138, "y": 546.0989745, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t11 dermatome", "x": 42.19010399, "y": 613.7662475, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t12 dermatome", "x": 64.01447985, "y": 618.8450792, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t2 dermatome", "x": 45.03660561, "y": 576.7671596, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t3 dermatome", "x": 38.16443316, "y": 627.7237873, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t4 dermatome", "x": 64.81201133, "y": 598.3102782, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t5 dermatome", "x": 60.93179281, "y": 612.4309722, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t6 dermatome", "x": 41.97128035, "y": 590.7889636, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t7 dermatome", "x": 42.79204503, "y": 618.0879791, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t8 dermatome", "x": 43.21213496, "y": 589.3027717, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "left t9 dermatome", "x": 43.99139655, "y": 573.4128705, "location": "thorax", "sublocation": "thoracic spine", "direction": "left"}, {"name": "right c2 dermatome", "x": -31.29, "y": 810.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right c3 dermatome", "x": -31.57, "y": 785.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right c4 dermatome", "x": -27.15, "y": 760.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right c5 dermatome", "x": -15.98, "y": 735.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right c6 dermatome", "x": -28.04, "y": 710.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right c7 dermatome", "x": -12.84, "y": 685.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right c8 dermatome", "x": -9.15, "y": 660.0, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right coccygeal dermatome", "x": -47.97950521, "y": 617.9449328, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right l1 dermatome", "x": -45.06616991, "y": 582.208763, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right l2 dermatome", "x": -54.44178061, "y": 565.9691178, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right l3 dermatome", "x": -46.1052987, "y": 623.936467, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right l4 dermatome", "x": -48.16074071, "y": 607.6094786, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right l5 dermatome", "x": -40.3950484, "y": 621.2566161, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right s1 dermatome", "x": -59.48728394, "y": 574.2330754, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right s2 dermatome", "x": -68.5586666, "y": 628.979674, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right s3 dermatome", "x": -54.11768998, "y": 600.1000416, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right s4 dermatome", "x": -59.06327483, "y": 627.4473086, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right s5 dermatome", "x": -43.21239896, "y": 589.4392444, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t1 dermatome", "x": -48.87200872, "y": 601.3932063, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t10 dermatome", "x": -57.28360138, "y": 546.0989745, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t11 dermatome", "x": -42.19010399, "y": 613.7662475, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t12 dermatome", "x": -64.01447985, "y": 618.8450792, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t2 dermatome", "x": -45.03660561, "y": 576.7671596, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t3 dermatome", "x": -38.16443316, "y": 627.7237873, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t4 dermatome", "x": -64.81201133, "y": 598.3102782, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t5 dermatome", "x": -60.93179281, "y": 612.4309722, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t6 dermatome", "x": -41.97128035, "y": 590.7889636, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t7 dermatome", "x": -42.79204503, "y": 618.0879791, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t8 dermatome", "x": -43.21213496, "y": 589.3027717, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}, {"name": "right t9 dermatome", "x": -43.99139655, "y": 573.4128705, "location": "thorax", "sublocation": "thoracic spine", "direction": "right"}];
            let activeDermatomes = new Set();
            const tooltip = document.getElementById('tooltip');

            document.querySelectorAll('.spinal-button').forEach(button => {
                button.addEventListener('click', function() {
                    const level = this.dataset.level;
                    const side = this.dataset.side;
                    const dermatomeKey = `${side} ${level} dermatome`;
                    
                    this.classList.toggle('active');
                    
                    if (this.classList.contains('active')) {
                        activeDermatomes.add(dermatomeKey);
                    } else {
                        activeDermatomes.delete(dermatomeKey);
                    }
                    
                    updateVisualization();
                });

                // Add hover effect
                button.addEventListener('mouseover', function() {
                    const level = this.dataset.level;
                    const side = this.dataset.side;
                    const dermatomeKey = `${side} ${level} dermatome`;
                    
                    // Show temporary highlight
                    const dermatome = dermatomes.find(d => d.name === dermatomeKey);
                    if (dermatome) {
                        const highlight = document.createElement('div');
                        highlight.className = 'dermatome-highlight temp';
                        highlight.style.left = dermatome.x + '%';
                        highlight.style.top = dermatome.y + '%';
                        document.getElementById('visualization').appendChild(highlight);
                        
                        // Show tooltip
                        tooltip.style.display = 'block';
                        tooltip.textContent = dermatomeKey;
                        tooltip.style.left = `${dermatome.x}%`;
                        tooltip.style.top = `${parseFloat(dermatome.y) - 2}%`;
                    }
                });

                button.addEventListener('mouseout', function() {
                    // Remove temporary highlights
                    document.querySelectorAll('.dermatome-highlight.temp').forEach(el => el.remove());
                    tooltip.style.display = 'none';
                });
            });

            function updateVisualization() {
                // Remove all highlights except tooltip
                document.querySelectorAll('.dermatome-highlight:not(.temp)').forEach(el => el.remove());
                
                // Add highlights for active dermatomes
                activeDermatomes.forEach(dermatomeKey => {
                    const dermatome = dermatomes.find(d => d.name === dermatomeKey);
                    if (dermatome) {
                        const highlight = document.createElement('div');
                        highlight.className = 'dermatome-highlight active';
                        highlight.style.left = dermatome.x + '%';
                        highlight.style.top = dermatome.y + '%';
                        
                        // Add hover effect for active highlights
                        highlight.addEventListener('mouseover', function() {
                            tooltip.style.display = 'block';
                            tooltip.textContent = dermatomeKey;
                            tooltip.style.left = `${dermatome.x}%`;
                            tooltip.style.top = `${parseFloat(dermatome.y) - 2}%`;
                        });
                        
                        highlight.addEventListener('mouseout', function() {
                            tooltip.style.display = 'none';
                        });
                        
                        document.getElementById('visualization').appendChild(highlight);
                    }
                });
            }
        </script>
    </body>
    </html>
    
